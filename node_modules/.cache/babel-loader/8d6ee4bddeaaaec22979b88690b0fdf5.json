{"ast":null,"code":"var _jsxFileName = \"/home/ale/Software/workspaces/ispyb/py-ispyb-ui/src/components/login/loginform.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { Alert, Button, FormControl, Glyphicon, Panel, FormGroup, ControlLabel } from 'react-bootstrap';\nimport UI from '../../config/ui';\nimport ErrorUserMessage from '../UserMessages/ErrorUserMessage';\nimport AnonymousSignIn from './AnonymousSignIn';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { doSignIn } from '../../actions/login';\nimport { useForm } from 'react-hook-form';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction LoginForm(props) {\n  _s();\n\n  const {\n    plugin\n  } = props;\n  const user = useSelector(state => state.user);\n  const {\n    register,\n    handleSubmit\n  } = useForm();\n  const dispatch = useDispatch();\n  return /*#__PURE__*/_jsxDEV(Panel, {\n    className: \"tab-panel-fix\",\n    style: {\n      padding: '20px 0 '\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"container-fluid\",\n      onSubmit: handleSubmit(data => {\n        dispatch(doSignIn(plugin, data.username, data.password));\n      }),\n      children: [UI.loginForm.header && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-info\",\n        style: {\n          textAlign: 'left'\n        },\n        children: UI.loginForm.header\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 11\n      }, this), user.error && /*#__PURE__*/_jsxDEV(ErrorUserMessage, {\n        text: user.error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 24\n      }, this), user.isSessionExpired && /*#__PURE__*/_jsxDEV(Alert, {\n        bsStyle: \"warning\",\n        children: \"Session expired\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 35\n      }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n        controlId: \"username\",\n        children: [/*#__PURE__*/_jsxDEV(ControlLabel, {\n          children: UI.loginForm.usernameLabel\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          inputRef: register({\n            required: true\n          }),\n          type: \"text\",\n          name: \"username\",\n          autoFocus: true,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n        controlId: \"password\",\n        children: [/*#__PURE__*/_jsxDEV(ControlLabel, {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          inputRef: register({\n            required: true\n          }),\n          type: \"password\",\n          name: \"password\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        style: {\n          marginTop: 5,\n          width: '100%'\n        },\n        type: \"submit\",\n        bsStyle: \"primary\",\n        children: [/*#__PURE__*/_jsxDEV(Glyphicon, {\n          glyph: \"log-in\",\n          style: {\n            marginRight: 10\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 11\n        }, this), user.isAuthenticating ? 'Signing in...' : 'Sign in']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AnonymousSignIn, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 18,\n    columnNumber: 5\n  }, this);\n}\n\n_s(LoginForm, \"MPLRtz6RzhNZ2VUv+hXEdeKCVXg=\", false, function () {\n  return [useSelector, useForm, useDispatch];\n});\n\n_c = LoginForm;\nexport default LoginForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"sources":["/home/ale/Software/workspaces/ispyb/py-ispyb-ui/src/components/login/loginform.js"],"names":["React","Alert","Button","FormControl","Glyphicon","Panel","FormGroup","ControlLabel","UI","ErrorUserMessage","AnonymousSignIn","useSelector","useDispatch","doSignIn","useForm","LoginForm","props","plugin","user","state","register","handleSubmit","dispatch","padding","data","username","password","loginForm","header","textAlign","error","isSessionExpired","usernameLabel","required","marginTop","width","marginRight","isAuthenticating"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,EAAgBC,MAAhB,EAAwBC,WAAxB,EAAqCC,SAArC,EAAgDC,KAAhD,EAAuDC,SAAvD,EAAkEC,YAAlE,QAAsF,iBAAtF;AACA,OAAOC,EAAP,MAAe,iBAAf;AACA,OAAOC,gBAAP,MAA6B,kCAA7B;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,SAASC,OAAT,QAAwB,iBAAxB;;;AAEA,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;AAAA;;AACxB,QAAM;AAAEC,IAAAA;AAAF,MAAaD,KAAnB;AACA,QAAME,IAAI,GAAGP,WAAW,CAAEQ,KAAD,IAAWA,KAAK,CAACD,IAAlB,CAAxB;AAEA,QAAM;AAAEE,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,MAA6BP,OAAO,EAA1C;AACA,QAAMQ,QAAQ,GAAGV,WAAW,EAA5B;AAEA,sBACE,QAAC,KAAD;AAAO,IAAA,SAAS,EAAC,eAAjB;AAAiC,IAAA,KAAK,EAAE;AAAEW,MAAAA,OAAO,EAAE;AAAX,KAAxC;AAAA,4BACE;AACE,MAAA,SAAS,EAAC,iBADZ;AAEE,MAAA,QAAQ,EAAEF,YAAY,CAAEG,IAAD,IAAU;AAC/BF,QAAAA,QAAQ,CAACT,QAAQ,CAACI,MAAD,EAASO,IAAI,CAACC,QAAd,EAAwBD,IAAI,CAACE,QAA7B,CAAT,CAAR;AACD,OAFqB,CAFxB;AAAA,iBAMGlB,EAAE,CAACmB,SAAH,CAAaC,MAAb,iBACC;AAAG,QAAA,SAAS,EAAC,WAAb;AAAyB,QAAA,KAAK,EAAE;AAAEC,UAAAA,SAAS,EAAE;AAAb,SAAhC;AAAA,kBACGrB,EAAE,CAACmB,SAAH,CAAaC;AADhB;AAAA;AAAA;AAAA;AAAA,cAPJ,EAWGV,IAAI,CAACY,KAAL,iBAAc,QAAC,gBAAD;AAAkB,QAAA,IAAI,EAAEZ,IAAI,CAACY;AAA7B;AAAA;AAAA;AAAA;AAAA,cAXjB,EAYGZ,IAAI,CAACa,gBAAL,iBAAyB,QAAC,KAAD;AAAO,QAAA,OAAO,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAZ5B,eAcE,QAAC,SAAD;AAAW,QAAA,SAAS,EAAC,UAArB;AAAA,gCACE,QAAC,YAAD;AAAA,oBAAevB,EAAE,CAACmB,SAAH,CAAaK;AAA5B;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,WAAD;AAAa,UAAA,QAAQ,EAAEZ,QAAQ,CAAC;AAAEa,YAAAA,QAAQ,EAAE;AAAZ,WAAD,CAA/B;AAAqD,UAAA,IAAI,EAAC,MAA1D;AAAiE,UAAA,IAAI,EAAC,UAAtE;AAAiF,UAAA,SAAS,MAA1F;AAA2F,UAAA,QAAQ;AAAnG;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAdF,eAmBE,QAAC,SAAD;AAAW,QAAA,SAAS,EAAC,UAArB;AAAA,gCACE,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,WAAD;AAAa,UAAA,QAAQ,EAAEb,QAAQ,CAAC;AAAEa,YAAAA,QAAQ,EAAE;AAAZ,WAAD,CAA/B;AAAqD,UAAA,IAAI,EAAC,UAA1D;AAAqE,UAAA,IAAI,EAAC,UAA1E;AAAqF,UAAA,QAAQ;AAA7F;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAnBF,eAwBE,QAAC,MAAD;AAAQ,QAAA,KAAK,EAAE;AAAEC,UAAAA,SAAS,EAAE,CAAb;AAAgBC,UAAAA,KAAK,EAAE;AAAvB,SAAf;AAAgD,QAAA,IAAI,EAAC,QAArD;AAA8D,QAAA,OAAO,EAAC,SAAtE;AAAA,gCACE,QAAC,SAAD;AAAW,UAAA,KAAK,EAAC,QAAjB;AAA0B,UAAA,KAAK,EAAE;AAAEC,YAAAA,WAAW,EAAE;AAAf;AAAjC;AAAA;AAAA;AAAA;AAAA,gBADF,EAEGlB,IAAI,CAACmB,gBAAL,GAAwB,eAAxB,GAA0C,SAF7C;AAAA;AAAA;AAAA;AAAA;AAAA,cAxBF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eA+BE,QAAC,eAAD;AAAA;AAAA;AAAA;AAAA,YA/BF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAmCD;;GA1CQtB,S;UAEMJ,W,EAEsBG,O,EAClBF,W;;;KALVG,S;AA4CT,eAAeA,SAAf","sourcesContent":["import React from 'react';\nimport { Alert, Button, FormControl, Glyphicon, Panel, FormGroup, ControlLabel } from 'react-bootstrap';\nimport UI from '../../config/ui';\nimport ErrorUserMessage from '../UserMessages/ErrorUserMessage';\nimport AnonymousSignIn from './AnonymousSignIn';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { doSignIn } from '../../actions/login';\nimport { useForm } from 'react-hook-form';\n\nfunction LoginForm(props) {\n  const { plugin } = props;\n  const user = useSelector((state) => state.user);\n\n  const { register, handleSubmit } = useForm();\n  const dispatch = useDispatch();\n\n  return (\n    <Panel className=\"tab-panel-fix\" style={{ padding: '20px 0 ' }}>\n      <form\n        className=\"container-fluid\"\n        onSubmit={handleSubmit((data) => {\n          dispatch(doSignIn(plugin, data.username, data.password));\n        })}\n      >\n        {UI.loginForm.header && (\n          <p className=\"text-info\" style={{ textAlign: 'left' }}>\n            {UI.loginForm.header}\n          </p>\n        )}\n        {user.error && <ErrorUserMessage text={user.error} />}\n        {user.isSessionExpired && <Alert bsStyle=\"warning\">Session expired</Alert>}\n\n        <FormGroup controlId=\"username\">\n          <ControlLabel>{UI.loginForm.usernameLabel}</ControlLabel>\n          <FormControl inputRef={register({ required: true })} type=\"text\" name=\"username\" autoFocus required />\n        </FormGroup>\n\n        <FormGroup controlId=\"password\">\n          <ControlLabel>Password</ControlLabel>\n          <FormControl inputRef={register({ required: true })} type=\"password\" name=\"password\" required />\n        </FormGroup>\n\n        <Button style={{ marginTop: 5, width: '100%' }} type=\"submit\" bsStyle=\"primary\">\n          <Glyphicon glyph=\"log-in\" style={{ marginRight: 10 }} />\n          {user.isAuthenticating ? 'Signing in...' : 'Sign in'}\n        </Button>\n      </form>\n\n      <AnonymousSignIn />\n    </Panel>\n  );\n}\n\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}